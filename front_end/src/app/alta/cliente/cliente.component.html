<mat-card>
  <mat-card-content class="center-text">

    <form [formGroup]="formCli" (ngSubmit)="addClient()">
      <mat-grid-list cols="3" rowHeight="12px">
        <mat-grid-tile rowspan="6"></mat-grid-tile>
        <mat-grid-tile rowspan="6">
          <mat-form-field class="full-width-field">
            <input type="text" matInput placeholder="RFC" formControlName="rfc">
            <mat-error *ngIf="rfc.invalid">{{getErrorMessage('rfc')}}</mat-error>
          </mat-form-field>
        </mat-grid-tile>
        <mat-grid-tile rowspan="6"></mat-grid-tile>
        <mat-grid-tile rowspan="6"></mat-grid-tile>
        <mat-grid-tile rowspan="6">
          <mat-form-field class="full-width-field">
            <input type="text" matInput placeholder="Razón social" formControlName="social">
            <mat-error *ngIf="social.invalid">{{getErrorMessage('social')}}</mat-error>
          </mat-form-field>
        </mat-grid-tile>
        <mat-grid-tile rowspan="6"></mat-grid-tile>
        <mat-grid-tile rowspan="6"></mat-grid-tile>
        <mat-grid-tile rowspan="6">
          <mat-form-field class="full-width-field">
            <mat-label>Dirección</mat-label>
            <input type="text" matInput placeholder="Dirección" formControlName="direccion">
            <mat-error *ngIf="direccion.invalid">{{getErrorMessage('direccion')}}</mat-error>
          </mat-form-field>
        </mat-grid-tile>
        <mat-grid-tile rowspan="6"></mat-grid-tile>
        <mat-grid-tile rowspan="6"></mat-grid-tile>
        <mat-grid-tile rowspan="6">
          <p>
            <button mat-raised-button color="primary" type="submit">Agregar</button>
          </p>
        </mat-grid-tile>

      </mat-grid-list>

    </form>

  </mat-card-content>
</mat-card>

<mat-card>
  <mat-card-content>
    <div>
      <label>
        <h3>Clientes</h3>
      </label>
    </div>
    <div class="center-text mat-elevation-z8">
      <table mat-table #table [dataSource]="allData" style="width: 100%;">
        <ng-container matColumnDef="rfc">
          <mat-header-cell *matHeaderCellDef>RFC</mat-header-cell>
          <mat-cell *matCellDef="let user">
            <div> {{user.rfc}} </div>
          </mat-cell>
        </ng-container>
        <ng-container matColumnDef="social">
          <mat-header-cell *matHeaderCellDef>Razon Social</mat-header-cell>
          <mat-cell *matCellDef="let user">
            <div> {{user.social}} </div>
          </mat-cell>
        </ng-container>
        <ng-container matColumnDef="direccion">
          <mat-header-cell *matHeaderCellDef>Dirección</mat-header-cell>
          <mat-cell *matCellDef="let user">
            <div> {{user.direccion}} </div>
          </mat-cell>
        </ng-container>
        <ng-container matColumnDef="actions">
          <mat-header-cell *matHeaderCellDef>Actions </mat-header-cell>
          <mat-cell *matCellDef="let user">
            <button mat-button color="primary" (click)="openDialog(this.user)">Edit</button> |
            <button mat-button color="warn" (click)="delete(this.user)">Delete</button>
          </mat-cell>
        </ng-container>
        <mat-header-row *matHeaderRowDef="columnsToDisplay"></mat-header-row>
        <mat-row *matRowDef="let dataSource; columns: columnsToDisplay;"></mat-row>

      </table>
      <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
    </div>

  </mat-card-content>
</mat-card>

<ng-template #callAPIDialog>
  <h2 matDialogTitle>Editando Proveedor </h2>
  <mat-dialog-content>


    <mat-form-field appearance="fill" class="full-width-field">
      <mat-label>Direccion:</mat-label>
      <input matInput [(ngModel)]="usrToShow.direccion">
    </mat-form-field>

    <mat-form-field appearance="fill" class="full-width-field">
      <mat-label>Razon social:</mat-label>
      <input matInput [(ngModel)]="usrToShow.razon_social">
    </mat-form-field>

    <mat-form-field appearance="fill" class="full-width-field">
      <mat-label>RFC:</mat-label>
      <input matInput [(ngModel)]="usrToShow.rfc">
    </mat-form-field>

    <mat-form-field appearance="fill" class="full-width-field">
      <mat-label>Ultima modificación:</mat-label>
      <input matInput value="{{usrToShow.updatedAt | date :'short'}}" disabled>
    </mat-form-field>

    <mat-form-field appearance="fill" class="full-width-field">
      <mat-label>Proveedor creado:</mat-label>
      <input matInput value="{{usrToShow.createdAt | date :'short'}}" disabled>
    </mat-form-field>

  </mat-dialog-content>
  <mat-dialog-actions align="end">
    <button mat-button matDialogClose="no" (click)="afeterC('no')">No</button>
    <button mat-button matDialogClose="yes" (click)="afeterC('yes')">Yes</button>
  </mat-dialog-actions>
</ng-template>